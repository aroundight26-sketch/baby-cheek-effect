<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ほっぺぷるん</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/7.2.4/pixi.min.js"></script>
</head>
<body>
  <script>
    const app = new PIXI.Application({
      width: 1920,
      height: 1080,
      backgroundAlpha: 0
    });
    document.body.appendChild(app.view);

    // 背景画像（赤ちゃん全体）
    const background = PIXI.Sprite.from('baby.jpg');
    app.stage.addChild(background);
    background.interactive = false;

    // 左ほっぺスプライト
    const cheekLeft = PIXI.Sprite.from('cheek-left.png');
    cheekLeft.anchor.set(0.5);
    cheekLeft.x = 960;
    cheekLeft.y = 540;
    cheekLeft.interactive = true;
    cheekLeft.buttonMode = true;
    cheekLeft.hitArea = new PIXI.Circle(45, -80, 60); 
    app.stage.addChild(cheekLeft);

    // 右ほっぺスプライト
    const cheekRight = PIXI.Sprite.from('cheek-right.png');
    cheekRight.anchor.set(0.5);
    cheekRight.x = 960;
    cheekRight.y = 540;
    cheekRight.interactive = true;
    cheekRight.buttonMode = true;
    cheekRight.hitArea = new PIXI.Circle(250, -70, 30);
    app.stage.addChild(cheekRight);

    /* 左ほっぺのヒットエリア確認用
    const debugLeft = new PIXI.Graphics();
    debugLeft.beginFill(0xffaaaa, 0.4); // 薄いピンク、40%透明
    debugLeft.drawCircle(45, -80, 60);
    debugLeft.endFill();
    debugLeft.x = cheekLeft.x;
    debugLeft.y = cheekLeft.y;
    app.stage.addChild(debugLeft); */

    /* 右ほっぺのヒットエリア確認用
    const debugRight = new PIXI.Graphics();
    debugRight.beginFill(0xaaffff, 0.4); // 薄い水色、40%透明
    debugRight.drawCircle(250, -70, 30);
    debugRight.endFill();
    debugRight.x = cheekRight.x;
    debugRight.y = cheekRight.y;
    app.stage.addChild(debugRight);*/



    // 揺れアニメーション関数
function animateCheek(sprite, scaleX, scaleY, duration = 1600) {
  const original = { x: sprite.scale.x, y: sprite.scale.y };
  const start = performance.now();

  function tick(now) {
    const elapsed = now - start;
    const progress = elapsed / duration;

    // 減衰する揺れ（バネっぽい）
    const damping = Math.exp(-4 * progress); // 減衰係数
    const oscillation = Math.sin(progress * Math.PI * 6); // 周期

    const scale = 1 + (scaleX - 1) * damping * oscillation;
    sprite.scale.set(scale, 2 - scale); // 横に揺れると縦も反対に

    if (progress < 1) {
      requestAnimationFrame(tick);
    } else {
      sprite.scale.set(original.x, original.y);
    }
  }

  requestAnimationFrame(tick);
}



    cheekLeft.on('pointerdown', () => animateCheek(cheekLeft, 1.1, 0.7));
    cheekRight.on('pointerdown', () => animateCheek(cheekRight, 1.02, 0.9));
  </script>
</body>
</html>